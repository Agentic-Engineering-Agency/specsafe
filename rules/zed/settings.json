{
  "assistant": {
    "default_model": {
      "provider": "anthropic",
      "model": "claude-3-5-sonnet-latest"
    },
    "version": "2"
  },
  "context_servers": {
    "specsafe": {
      "command": "cat",
      "args": [
        "PROJECT_STATE.md"
      ]
    }
  },
  "agent": {
    "name": "SpecSafe",
    "description": "Spec-driven development assistant for OpenSpec-style workflow",
    "context": {
      "files": [
        "PROJECT_STATE.md",
        "specsafe.config.json"
      ],
      "directories": [
        "specs/active",
        "specs/drafts"
      ]
    },
    "commands": {
      "specsafe:explore": {
        "description": "Pre-spec exploration and research",
        "prompt": "Conduct preliminary exploration. Guide problem definition, research technology options, estimate effort, document findings in specs/exploration/.",
        "context": [
          "PROJECT_STATE.md"
        ]
      },
      "specsafe:new": {
        "description": "Initialize spec with PRD",
        "prompt": "Create a new spec with PRD. Generate SPEC-YYYYMMDD-NNN, create PRD, recommend tech stack. Output to specs/drafts/.",
        "context": [
          "PROJECT_STATE.md"
        ]
      },
      "specsafe:spec": {
        "description": "Generate detailed spec from PRD",
        "prompt": "Read PRD and create comprehensive spec with FR-XXX, TR-XXX, Given/When/Then scenarios. Move to specs/active/.",
        "context": [
          "PROJECT_STATE.md",
          "specs/drafts/*.md"
        ]
      },
      "specsafe:test-create": {
        "description": "Create tests from spec scenarios",
        "prompt": "Generate test suite from spec. Create test files mapping scenarios to test cases.",
        "context": [
          "PROJECT_STATE.md",
          "specs/active/*.md"
        ]
      },
      "specsafe:test-apply": {
        "description": "Apply tests — development mode",
        "prompt": "Guide implementation following Plan → Implement → Test → Commit. Never modify tests to pass.",
        "context": [
          "PROJECT_STATE.md",
          "specs/active/*.md",
          "src/__tests__/**/*.test.ts"
        ]
      },
      "specsafe:verify": {
        "description": "Run tests and iterate until pass",
        "prompt": "Run test suite, analyze failures, fix code (not tests), iterate. Report pass rate and coverage.",
        "context": [
          "PROJECT_STATE.md",
          "specs/active/*.md",
          "src/__tests__/**/*.test.ts"
        ]
      },
      "specsafe:done": {
        "description": "Complete and archive spec",
        "prompt": "Verify checklist, run final tests, archive spec. Generate completion summary.",
        "context": [
          "PROJECT_STATE.md",
          "specs/active/*.md"
        ]
      },
      "specsafe": {
        "description": "Show project status",
        "prompt": "Read PROJECT_STATE.md and show active specs, stages, and recommended next actions.",
        "context": [
          "PROJECT_STATE.md"
        ]
      }
    },
    "workflow": {
      "stages": [
        "EXPLORE",
        "NEW",
        "SPEC",
        "TEST-CREATE",
        "TEST-APPLY",
        "VERIFY",
        "DONE"
      ],
      "transitions": {
        "EXPLORE": [
          "NEW"
        ],
        "NEW": [
          "SPEC"
        ],
        "SPEC": [
          "TEST-CREATE"
        ],
        "TEST-CREATE": [
          "TEST-APPLY"
        ],
        "TEST-APPLY": [
          "VERIFY"
        ],
        "VERIFY": [
          "DONE",
          "TEST-APPLY"
        ],
        "DONE": []
      }
    }
  }
}
